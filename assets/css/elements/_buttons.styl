/**
 * Buttons
 * @section
 */

/*------------------------------------*\
  $CONTENTS
\*------------------------------------*/
/*
 * VARIABLES............Variables just for buttons
 * DEFAULT_BUTTON.......Standard button
 * RECOMMENDED_BUTTON...Button used for recommended actions
 * MINOR_BUTTON.........Button used for minor actions
 * DESTRUCTIVE_BUTTON...Button used for destructive actions
 * BUttON_STATES........Button states (hover, disabled, etc.)
 * LARGE_BUTTON.........A larger button used for campaign pages
 * SMALL_BUTTON.........A smaller button used for apps and inline form elements
 * LOADING_ANIMATION....Animation for a loading button
 * LEGACY_BUTTON........Deprecated .fs-button class styles. Deprecate in v4
 */





/*------------------------------------*\
  $VARIABLES
\*------------------------------------*/
$blue = #3073dd;
$blue-light = #3882f8;
$blue-dark = #1f61c9;

$grey = #f5f4f1;
$grey-light = #fbfaf9;
$grey-dark = #e8e6e0;
$grey-border = #beb8a7;

$red = #cc3227
$red-light = #e64034;
$red-dark = #af180d;

$link-blue = #0060d7;





/*------------------------------------*\
  $DEFAULT_BUTTON
\*------------------------------------*/
/**
 * Types
 *
 * ##### Acceptable Use
 *
 * By default, buttons are left aligned to the content. In most cases, the recommended
 * button is the leftmost button.
 *
 * The `fs-button` should be used for most buttons.
 *
 * The `fs-button--recommended` should be used to recommend an action to the user.
 *
 * The `fs-button--minor` should be used for actions that you wish to de-emphasize.
 *
 * The `fs-button--destructive` should be used to confirm actions that will cause the user
 * to permanently lose data (e.g. deleting a photo).
 *
 * ##### Avoid
 *
 * Do not use the `fs-button--recommended` for any actions that would cause the use to lose
 * data (such as deleting a message).
 *
 * Do not use the `fs-button--large` for anything other than landing pages and marketing
 * campaign pages.
 *
 * @section
 * @sectionof Buttons
 *
 * @example
 * <p>
 *   <small class="example__title">Options</small>
 *   <button class="recommended">Recommended</button>
 *   <button>Button</button>
 *   <button class="minor">Minor</button>
 *   <button class="destructive">Destructive</button>
 * </p>
 *
 * <p>
 *   <small class="example__title">Sizes</small>
 *   <button class="large">Large</button>
 *   <button>Default</button>
 *   <button class="small">Small</button>
 * </p>
 *
 * <p>
 *   <small class="example__title">Elements</small>
 *   <button>Button</button>
 *   <a href="javascript:void(0)" class="fs-button">Anchor</a>
 *   <input type="submit" value="Submit"/>
 * </p>
 *
 * <p>
 *   <small class="example__title">Disabled</small>
 *   <button class="recommended" disabled>Recommended</button>
 *   <button disabled>Button</button>
 * </p>
 */

/*
 * 1. Default button height should be 35px.
 * 2. Links need to override :focus and :visited color.
 * 3. :hover should always be declared before :active so that :active overrides
 *    :hover styles.
 * 4. Make button outline offset override bootstrap outline-offset for link buttons.
 * 5. Disable hover effects when disabled.
 * 6. Button states must be placed after all other types of buttons so that the
 *    default hover, disabled, and focus/active styles don't get overridden
 *    by the other types (since button.recommended has the same specificity as
 *    button:disabled).
 * 7. .fs-button class is for links that need to be styled like buttons.
 */
button,
input[type="submit"],
.fs-button {
  appearance: none;
  -webkit-touch-callout: none;
  background-color: $grey;
  border-radius: $border-radius;
  border: 1px solid $grey-border;
  color: $color-grey-body;
  cursor: pointer;
  display: inline-block;
  font-family: inherit;
  font-size: $font-size-medium;
  font-weight: normal;
  line-height: 1;
  padding: 8.5px 20px; /* [1] */
  position: relative;
  text-decoration: none;
  transition: padding .2s;
  user-select: none;
  vertical-align: middle;
  white-space: nowrap;





  /*------------------------------------*\
    $RECOMMENDED_BUTTON
  \*------------------------------------*/
  &.recommended {
    background-color: $blue;
    border: 1px solid darken($blue, 5%);
    color: #fff;

    &:hover { /* [3] */
      background-color: $blue-light;
      color: #fff;
    }

    &:active {
      background-color: $blue-dark;
    }

    &:focus,
    &:visited {
      color: #fff; /* [2] */
    }
  }





  /*------------------------------------*\
    $MINOR_BUTTON
  \*------------------------------------*/
  &.minor {
    background-color: transparent;
    color: $link-blue;
    border-color: transparent;

    &:hover { /* [3] */
      background-color: transparent;
      color: $link-blue;
      text-decoration: underline;
    }

    &:active {
      background-color: transparent;
      color: $link-blue;
      text-decoration: underline;
    }

    &:focus,
    &:visited {
      color: $link-blue; /* [2] */
    }
  }





  /*------------------------------------*\
    $DESTRUCTIVE_BUTTON
  \*------------------------------------*/
  &.destructive {
    background-color: $red;
    border: 1px solid darken($red, 5%);
    color: #fff;

    &:hover { /* [3] */
      background-color: $red-light;
      color: #fff;
    }

    &:active {
      background-color: $red-dark;
    }

    &:focus,
    &:visited {
      color: #fff; /* [2] */
    }
  }





  /*------------------------------------*\
    $BUTTON_STATES
  \*------------------------------------*/
  /* [6] */
  &:hover { /* [3] */
    background-color: $grey-light;
    color: $color-grey-body;
    text-decoration: none;
  }

  &:active {
    background-color: $grey-dark;
  }

  &:disabled,
  &:disabled:hover { /* [5] */
    background-color: $grey;
    border: 1px solid lighten($grey-border, 20%);
    color: rgba($color-grey-body, 0.3);
    cursor: not-allowed;
    text-decoration: none;
  }

  // fix outline for firefox and safari removed by bootstrap
  &:focus {
    outline: auto 2px Highlight;
    outline: auto 5px -webkit-focus-ring-color;
  }

  &:focus,
  &:visited {
    color: $color-grey-body; /* [2] */
    text-decoration: none;
    outline-offset: 2px; /* [4] */
  }

  &:after {
    content: '';
    opacity: 0;
    transition: opacity 0.3s;
  }





  /*------------------------------------*\
    $LARGE_BUTTON
  \*------------------------------------*/
  /*
   * 1. Large button height should be 50px
   */
  &.large {
    border-radius: 5px;
    padding: 16px 20px; /* [1] */
  }





  /*------------------------------------*\
    $SMALL_BUTTON
  \*------------------------------------*/
  /*
   * 1. Small button height should be 30px
   */
  &.small {
    padding: 6px 20px; /* [1] */

    &.is-loading {
      padding-right: 42px;

      &:after {
        width: 16px;
        height: 16px;
        margin-top: 0;
      }
    }
  }





  /*------------------------------------*\
    $LOADING_ANIMATION
  \*------------------------------------*/
  /**
   * Animations
   *
   * The `fs-button--loading` class will only work for buttons and anchor tags. Input tags
   * will not work.
   *
   * ##### Acceptable Use
   *
   * Disable the button while the <code>fs-button--loading</code> class is active.
   *
   * @section
   * @sectionof Buttons
   *
   * @example
   * <div class="row-fluid">
   *   <p class="span9">
   *     <small class="example__title">Loading - <code>fs-button--loading</code></small>
   *     <button class="recommended animation__toggle" data-animation="fs-button--loading" data-animation-for="fs-button--loading" data-animation-show="true">
   *       <span class="animation__show">Loading</span>
   *     </button>
   *   </p>
   * </div>
   *
   * @code
   * <p>
   *   <button class="loading">Loading</button>
   * <p>
   */
  &[loading] {
    padding-right: 47px;

    &:after {
      @extends $icon-spinner-light;
      background-size: contain;
      height: 20px;
      margin-top: -2px;
      opacity: 1;
      position: absolute;
      right: 15px;
      width: 20px;
    }

    &[disabled]:after {
      @extends $icon-spinner;
    }
  }
}





/*------------------------------------*\
  $LEGACY_BUTTON
\*------------------------------------*/
.fs-button {
  appearance: none;
  -webkit-touch-callout: none;
  background-color: $grey;
  border-radius: $border-radius;
  border: 1px solid $grey-border;
  color: $color-grey-body;
  cursor: pointer;
  display: inline-block;
  font-size: pxToRem($font-size-medium);
  font-weight: normal;
  line-height: 1;
  padding: pxToRem(8.5px 20px); /* [1] */
  position: relative;
  text-decoration: none;
  transition: padding .2s;
  user-select: none;
  vertical-align: middle;
  white-space: nowrap;

  &:hover { /* [3] */
    background-color: $grey-light;
    color: $color-grey-body;
    text-decoration: none;

    // disable hover effects when disabled
    &:disabled,
    &.disabled {
      background-color: $grey;
      color: rgba(51,51,49,.3);
      text-decoration: none;
    }
  }

  &:active {
    background-color: $grey-dark;
  }

  &:disabled,
  &.disabled {
    cursor: not-allowed;
    background-color: $grey;
    border: 1px solid lighten($grey-border, 20%);
    color: rgba($color-grey-body, 0.3);
  }

  // fix outline for firefox and safari removed by bootstrap
  &:focus {
    outline: auto 2px Highlight;
    outline: auto 5px -webkit-focus-ring-color;
  }

  &:focus,
  &:visited {
    color: $color-grey-body; /* [2] */
    text-decoration: none;
    outline-offset: 2px; /* [4] */
  }

  &:after {
    content: '';
    opacity: 0;
    transition: opacity 0.3s;
  }

  &--recommended {
    background-color: $blue;
    border: 1px solid darken($blue, 5%);
    color: #fff;

    &:hover { /* [3] */
      background-color: $blue-light;
      color: #fff;
    }

    &:active {
      background-color: $blue-dark;
    }

    &:focus,
    &:visited {
      color: #fff; /* [2] */
    }

    &:disabled,
    &.disabled {

      // disable hover effects when disabled
      &:hover {
        color: rgba($color-grey-body, 0.3);
      }
    }
  }

  &--minor {
    background-color: transparent;
    color: $link-blue;
    border-color: transparent;

    &:hover { /* [3] */
      background-color: transparent;
      color: $link-blue;
      text-decoration: underline;
    }

    &:active {
      background-color: transparent;
      color: $link-blue;
      text-decoration: underline;
    }

    &:focus,
    &:visited {
      color: $link-blue; /* [2] */
    }
  }

  &--destructive {
    background-color: $red;
    border: 1px solid darken($red, 5%);
    color: #fff;

    &:hover { /* [3] */
      background-color: $red-light;
      color: #fff;
    }

    &:active {
      background-color: $red-dark;
    }

    &:focus,
    &:visited {
      color: #fff; /* [2] */
    }

    &:disabled,
    &.disabled {

      // disable hover effects when disabled
      &:hover {
        color: rgba($color-grey-body, 0.3);
      }
    }
  }

  /*
   * 1. Large button height should be 50px
   */
  &--large {
    border-radius: 5px;
    padding: pxToRem(16px 20px); /* [1] */
  }

  /*
   * 1. Small button height should be 30px
   */
  &--small {
    padding: pxToRem(6px 20px); /* [1] */

    &.is-loading {
      padding-right: 42px;

      &:after {
        width: 16px;
        height: 16px;
        margin-top: 0;
      }
    }
  }

  &--loading {
    padding-right: 47px;

    &:after {
      @extends $icon-spinner-light;
      background-size: contain;
      height: 20px;
      margin-top: -2px;
      opacity: 1;
      position: absolute;
      right: 15px;
      width: 20px;
    }

    &[disabled]:after {
      @extends $icon-spinner;
    }
  }
}